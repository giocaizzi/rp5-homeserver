# ==========================================
# Firefly III - Environment Variables
# ==========================================
# For Portainer: Copy these into Stack → Environment Variables section
#
# Generate secure tokens:
#   APP_KEY: head /dev/urandom | LC_ALL=C tr -dc 'A-Za-z0-9' | head -c 32 | base64
#   STATIC_CRON_TOKEN: head /dev/urandom | LC_ALL=C tr -dc 'A-Za-z0-9' | head -c 32
#   DB_PASSWORD: openssl rand -base64 32
# ==========================================

# ==========================================
# REQUIRED VARIABLES
# ==========================================

# Application encryption key (32 characters, base64 encoded)
# This is CRITICAL for security - generate a unique value
APP_KEY=

# Database password - MUST be set
# Use a strong random password
DB_PASSWORD=

# Static cron token (exactly 32 characters)
# Required for automated recurring transactions
STATIC_CRON_TOKEN=

# Firefly III Data Importer OAuth Client ID
# Leave empty initially, generate after first login:
# 0. Use `1` as placeholder to avoid errors before setup
# 1. Access https://firefly.local
# 2. Go to Profile → OAuth → "Create New Personal Access Client"
# 3. Name: "Data Importer"
# 4. Copy the Client ID here and redeploy stack
FIREFLY_CLIENT_ID=1

# ==========================================
# OPTIONAL - LUNCH FLOW INTEGRATION
# ==========================================

# Lunch Flow API Key for automated bank data import
# 1. Sign up at https://www.lunchflow.app/
# 2. Create a connection to your bank(s)
# 3. Go to "Destinations" → "Add Destination" → "API" → "Firefly III"
# 4. Copy the generated API key
# See: https://docs.firefly-iii.org/tutorials/data-importer/lunchflow/
LUNCH_FLOW_API_KEY=

# ==========================================
# OPTIONAL - DATABASE (defaults provided)
# ==========================================

# Database name (default: firefly)
DB_DATABASE=firefly

# Database username (default: firefly)
DB_USERNAME=firefly

# ==========================================
# OPTIONAL - APPLICATION SETTINGS
# ==========================================

# Hostname for Firefly III URL (default: firefly.local)
# This determines APP_URL: https://${FIREFLY_HOST}
FIREFLY_HOST=firefly.local

# Site owner email - shown in error messages (default: admin@firefly.local)
SITE_OWNER=admin@firefly.local

# Default language for new users (default: en_US)
# See: https://github.com/firefly-iii/firefly-iii/blob/main/config/firefly.php#L123
DEFAULT_LANGUAGE=en_US

# Default locale for number formatting (default: equal - same as language)
DEFAULT_LOCALE=equal

# Timezone (default: UTC)
# Examples: UTC, Europe/Amsterdam, America/New_York
# See: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
TZ=UTC

# ==========================================
# OPTIONAL - LOGGING
# ==========================================

# Application log level (default: notice)
# Options: debug, info, notice, warning, error, critical, alert, emergency
APP_LOG_LEVEL=notice

# Audit log level (default: emergency - disabled)
# Set to "info" to enable audit logging of financial operations
# WARNING: Audit logs may contain sensitive financial data
AUDIT_LOG_LEVEL=emergency

# ==========================================
# OPTIONAL - MAIL CONFIGURATION
# ==========================================

# Mail driver (default: log - writes to logs only)
# Options: log, smtp, sendmail
MAIL_MAILER=log

# SMTP settings (only needed if MAIL_MAILER=smtp)
MAIL_HOST=
MAIL_PORT=2525
MAIL_FROM=changeme@example.com
MAIL_USERNAME=
MAIL_PASSWORD=
MAIL_ENCRYPTION=

# ==========================================
# OPTIONAL - AUTHENTICATION
# ==========================================

# Authentication provider (default: eloquent - built-in)
# Options: eloquent, ldap, remote_user_guard
LOGIN_PROVIDER=eloquent

# ==========================================
# OPTIONAL - SECURITY HEADERS
# ==========================================

# Disable X-Frame-Options header (default: false)
# Set to true if embedding Firefly III in iframe
DISABLE_FRAME_HEADER=false

# Disable Content-Security-Policy header (default: false)
# Only set to true if you experience CSP-related issues
DISABLE_CSP_HEADER=false

# ==========================================
# OPTIONAL - DATA IMPORTER SETTINGS
# ==========================================

# Fallback locale for CSV import parsing (default: en_US)
# Used to parse amounts correctly during CSV imports
# Examples: en_US, en_GB, nl_NL, de_DE, fr_FR
FALLBACK_LOCALE=en_US

# Data Importer log level (default: info)
# Options: debug, info, notice, warning, error, critical, alert, emergency
IMPORTER_LOG_LEVEL=info

# Auto-import secret for API-based imports (min 16 characters)
# Leave empty to disable API imports
# Generate: head /dev/urandom | LC_ALL=C tr -dc 'A-Za-z0-9' | head -c 32
AUTO_IMPORT_SECRET=

# Allow POST-based auto-imports (default: false)
# Set to true to enable automated imports via POST requests
CAN_POST_AUTOIMPORT=false

# Allow POST-based file uploads (default: false)
# Set to true to enable file uploads via POST requests
CAN_POST_FILES=false

# Ignore duplicate transaction errors in import logs (default: false)
# Set to true for cleaner import mails on regular automated imports
IGNORE_DUPLICATE_ERRORS=false

# NOTE: The following are hardcoded in docker-compose.yml for Docker setup:
# - EXPECT_SECURE_URL=false (internal Docker communication is HTTP)
# - VERIFY_TLS_SECURITY=false (no TLS between containers)
# - USE_CACHE=true (improves performance)
